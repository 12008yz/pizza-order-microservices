'use strict';

module.exports = {
  up: async (queryInterface, Sequelize) => {
    // Получаем ID провайдеров (предполагаем, что они уже созданы)
    const providers = await queryInterface.sequelize.query(
      "SELECT id, slug FROM providers",
      { type: Sequelize.QueryTypes.SELECT }
    );

    const providerMap = {};
    providers.forEach(p => {
      providerMap[p.slug] = p.id;
    });

    await queryInterface.bulkInsert('tariffs', [
      // Ростелеком
      {
        name: 'Домашний интернет 100',
        description: 'Высокоскоростной интернет 100 Мбит/с',
        providerId: providerMap['rostelecom'],
        speed: 100,
        price: 500,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: false,
        tvChannels: null,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: 'Домашний интернет 300',
        description: 'Высокоскоростной интернет 300 Мбит/с',
        providerId: providerMap['rostelecom'],
        speed: 300,
        price: 700,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: false,
        tvChannels: null,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: 600,
        promoMonths: 6,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: 'Интернет + ТВ',
        description: 'Интернет 100 Мбит/с + 150 каналов ТВ',
        providerId: providerMap['rostelecom'],
        speed: 100,
        price: 800,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: true,
        tvChannels: 150,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      // МТС
      {
        name: 'Домашний интернет 200',
        description: 'Высокоскоростной интернет 200 Мбит/с',
        providerId: providerMap['mts'],
        speed: 200,
        price: 600,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: false,
        tvChannels: null,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: 'Всё в одном',
        description: 'Интернет 200 Мбит/с + ТВ + мобильная связь',
        providerId: providerMap['mts'],
        speed: 200,
        price: 1200,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: true,
        tvChannels: 200,
        hasMobile: true,
        mobileMinutes: 500,
        mobileGB: 30,
        mobileSMS: 500,
        promoPrice: 1000,
        promoMonths: 12,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      // Билайн
      {
        name: 'Домашний интернет 150',
        description: 'Высокоскоростной интернет 150 Мбит/с',
        providerId: providerMap['beeline'],
        speed: 150,
        price: 550,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: false,
        tvChannels: null,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      // Дом.ру
      {
        name: 'Интернет 250 Мбит/с',
        description: 'Высокоскоростной интернет 250 Мбит/с',
        providerId: providerMap['domru'],
        speed: 250,
        price: 650,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: false,
        tvChannels: null,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: 'Интернет + ТВ Пакет',
        description: 'Интернет 250 Мбит/с + 180 каналов ТВ',
        providerId: providerMap['domru'],
        speed: 250,
        price: 900,
        connectionPrice: 0,
        technology: 'fiber',
        hasTV: true,
        tvChannels: 180,
        hasMobile: false,
        mobileMinutes: null,
        mobileGB: null,
        mobileSMS: null,
        promoPrice: null,
        promoMonths: null,
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date(),
      },
    ]);
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete('tariffs', {}, {});
  },
};

